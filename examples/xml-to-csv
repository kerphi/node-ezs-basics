#!/usr/bin/env node
'use strict';

let ezs = require('ezs');

ezs.use(require('..'));

process.stdin.resume();
process.stdin.setEncoding('utf8');
process.stdin
  .pipe(ezs('XMLParse', { separator: [
    '/modsCollection/mods',
    '/teiCorpus/TEI',
    '/root/*',
    '/struct/*',
    '/rss/channel/item',
    '/feed/entry',
    '/rows/row'
  ]}))
  .pipe(ezs('flatten', { separator: '/'}))
  .pipe(ezs('standardize'))
  .pipe(ezs('CSVString', {format:'semicolon'}))
  .pipe(process.stdout);

