#!/usr/bin/env node
'use strict';

const ezs = require('ezs').use(require('..'));

process.stdin.resume();
process.stdin.setEncoding('utf8');
process.stdin
  .pipe(ezs('TXTParse', { separator: "\n" }))
  .pipe(ezs(function (data, feed) {
    if (this.isLast()) {
      feed.send(this.getIndex());
    }
    else {
      feed.end();
    }
  }))
  .pipe(ezs('stringify'))
  .pipe(process.stdout);

